<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Creating multi-stage and conditional query logic · JSONata</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;So far, we have introduced all the parts of the language that allow us to extract data from an input JSON document, combine the data using string and numeric operators, and format the structure of the output JSON document.  What follows are the parts that turn this into a Turing complete, functional programming language.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Creating multi-stage and conditional query logic · JSONata"/><meta property="og:type" content="website"/><meta property="og:url" content="https://andrew-coleman.github.io/index.html"/><meta property="og:description" content="&lt;p&gt;So far, we have introduced all the parts of the language that allow us to extract data from an input JSON document, combine the data using string and numeric operators, and format the structure of the output JSON document.  What follows are the parts that turn this into a Turing complete, functional programming language.&lt;/p&gt;
"/><meta property="og:image" content="https://andrew-coleman.github.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://andrew-coleman.github.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/jsonata-button.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/jsonata-examples.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/jsonata-button.png" alt="JSONata"/><h2 class="headerTitleWithLogo">JSONata</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/overview" target="_self">Docs</a></li><li class=""><a href="http://try.jsonata.org" target="_self">Try</a></li><li class=""><a href="https://github.com/jsonata-js/jsonata" target="_self">GitHub</a></li><li class=""><a href="https://www.npmjs.com/package/jsonata" target="_self">NPM</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Language Guide</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/docs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/using-nodejs">In NodeJS</a></li><li class="navListItem"><a class="navItem" href="/docs/using-browser">In a Web Page</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Language Guide</h3><ul><li class="navListItem"><a class="navItem" href="/docs/simple">Simple Queries</a></li><li class="navListItem"><a class="navItem" href="/docs/predicate">Predicate Queries</a></li><li class="navListItem"><a class="navItem" href="/docs/expressions">Functions and Expressions</a></li><li class="navListItem"><a class="navItem" href="/docs/construction">Result Structures</a></li><li class="navListItem"><a class="navItem" href="/docs/date-time">Date/Time Processing</a></li><li class="navListItem"><a class="navItem" href="/docs/sorting-grouping">Sorting, Grouping and Aggregation</a></li><li class="navListItem"><a class="navItem" href="/docs/processing">Processing Model</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/control">Composite Queries</a></li><li class="navListItem"><a class="navItem" href="/docs/programming">Functional Programming</a></li><li class="navListItem"><a class="navItem" href="/docs/regex">Regular Expressions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Operators</h3><ul><li class="navListItem"><a class="navItem" href="/docs/control-operators">Navigation Operators</a></li><li class="navListItem"><a class="navItem" href="/docs/numeric-operators">Numeric Operators</a></li><li class="navListItem"><a class="navItem" href="/docs/comparison-operators">Comparison Operators</a></li><li class="navListItem"><a class="navItem" href="/docs/boolean-operators">Boolean Operators</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Function Library</h3><ul><li class="navListItem"><a class="navItem" href="/docs/string-functions">String Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/numeric-functions">Numeric Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/aggregation-functions">Aggregation Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/boolean-functions">Boolean Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/array-functions">Array Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/object-functions">Object Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/date-time-functions">Date/Time Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/higher-order-functions">Higher Order Functions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Extending JSONata</h3><ul><li class="navListItem"><a class="navItem" href="/docs/embedding-extending">Embedding and Extending JSONata</a></li><li class="navListItem"><a class="navItem" href="/docs/contributing">Community and Contributing</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/andrew-coleman/jsonata-docs/edit/master/docscontrol.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Creating multi-stage and conditional query logic</h1></header><article><div><span><p>So far, we have introduced all the parts of the language that allow us to extract data from an input JSON document, combine the data using string and numeric operators, and format the structure of the output JSON document.  What follows are the parts that turn this into a Turing complete, functional programming language.</p>
<h2><a class="anchor" aria-hidden="true" id="conditional-expressions"></a><a href="#conditional-expressions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conditional expressions</h2>
<p>If/then/else constructs can be written using the ternary operator &quot;? :&quot;.</p>
<p><code>predicate ? expr1 : expr2</code></p>
<p>The expression <code>predicate</code> is evaluated.  If its effective boolean value (see definition) is <code>true</code> then <code>expr1</code> is evaluated and returned, otherwise <code>expr2</code> is evaluated and returned.</p>
<h2><a class="anchor" aria-hidden="true" id="parenthesized-expressions-and-blocks"></a><a href="#parenthesized-expressions-and-blocks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parenthesized expressions and blocks</h2>
<p>Used to override the operator precedence rules.  E.g.</p>
<ul>
<li><code>(5 + 3) * 4</code></li>
</ul>
<p>Used to compute complex expressions on a context value</p>
<ul>
<li><code>Product.(Price * Quantity)</code> - both Price and Quantity are fields of the Product value</li>
</ul>
<p>Used to support 'code blocks' - multiple expressions, separated by semicolons</p>
<p><code>(expr1; expr2; expr3)</code></p>
<p>Each expression in the block is evaluated <em>in sequential order</em>; the result of the last expression is returned from the block.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/processing"><span class="arrow-prev">← </span><span>The JSONata processing model</span></a><a class="docs-next button" href="/docs/programming"><span>Programming constructs</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#conditional-expressions">Conditional expressions</a></li><li><a href="#parenthesized-expressions-and-blocks">Parenthesized expressions and blocks</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/jsonata-white-25.png" alt="JSONata" width="66" height="58"/></a><div><h5>JSONata</h5>JSON query and transformation language.<br/>Go play in the <a href="http://try.jsonata.org" target="_blank" rel="noreferrer noopener">JSONata Exerciser</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jsonata" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://jsonata.slack.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/jsonata-js/jsonata">GitHub</a><a class="github-button" href="https://github.com/jsonata-js/jsonata" data-icon="octicon-star" data-count-href="/jsonata-js/jsonata/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 JSONata.org</section></footer></div></body></html>